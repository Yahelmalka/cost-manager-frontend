<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <title>Test idb.js</title>
</head>
<body>
   <script src="idb.js"></script>
   <script>
     async function test() {
       const db = await idb.openCostsDB("costsdb",1);
       const result1 =
                await db.addCost({sum:200, currency:"USD", category:"FOOD",
                        description:"pizza"});
       const result2 =
                await db.addCost({sum:400, currency: "USD", category:"CAR",
                        description:"fuel"});
       if(db) {
         console.log("creating db succeeded");
       }
       if(result1) {
         console.log("adding 1st cost item succeeded");
       }
       if(result2) {
         console.log("adding 2nd cost item succeeded");
       }
       
       // Test getReport with exchange rates
       const exchangeRates = {USD: 1, GBP: 0.6, EURO: 0.7, ILS: 3.4};
       const now = new Date();
       const year = now.getFullYear();
       const month = now.getMonth() + 1;
       const report = await db.getReport(year, month, "USD", exchangeRates);
       if(report) {
         console.log("getting report succeeded");
         console.log("Report:", report);
       }
     }
     test()
   </script>
</body>
</html>

