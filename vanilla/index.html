<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vanilla idb Test</title>
</head>
<body>

<h2>Vanilla IndexedDB Test</h2>

<script src="idb.js"></script>
<script>
    async function test() {
        try {
            const db = await openCostsDB("costsdb", 1);

            console.log("Database opened");

            await db.addCost({
                sum: 200,
                currency: "USD",
                category: "Food",
                description: "Pizza"
            });

            await db.addCost({
                sum: 100,
                currency: "USD",
                category: "Transport",
                description: "Bus"
            });

            console.log("Costs added");

            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth() + 1;

            const report = await db.getReport(year, month, "USD");

            console.log("Report created");
            console.log(report);

        } catch (err) {
            console.error("Error:", err);
        }
    }

    test();
</script>

</body>
</html>